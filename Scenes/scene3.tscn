[gd_scene load_steps=20 format=3 uid="uid://dyr4fpwt12eee"]

[ext_resource type="Texture2D" uid="uid://cu2lhi7s14pev" path="res://graphics/Forest1280x720.png" id="1_nnvjd"]
[ext_resource type="Script" uid="uid://c0qq1tly84tta" path="res://Scenes/scene_3.gd" id="1_sljpu"]
[ext_resource type="PackedScene" uid="uid://dejs7fyatuaui" path="res://Scenes/Bear.tscn" id="2_dl8gu"]
[ext_resource type="PackedScene" uid="uid://b38qsufa5piu7" path="res://Scenes/bunny.tscn" id="4_msh5e"]
[ext_resource type="Texture2D" uid="uid://ckild5a21347h" path="res://graphics/Tree.png" id="5_cvehr"]
[ext_resource type="Texture2D" uid="uid://corngptc2fj0u" path="res://graphics/Bush.png" id="6_sljpu"]
[ext_resource type="PackedScene" uid="uid://cgqnyjn7miwjw" path="res://Scenes/scarf.tscn" id="7_sljpu"]
[ext_resource type="Script" uid="uid://cdvtxjyp86j55" path="res://Scenes/scene3to4.gd" id="8_gtq7m"]
[ext_resource type="FontFile" uid="uid://cg7cgxd42u3a5" path="res://fonts/PixelOperator8.ttf" id="9_wdaeh"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gtq7m"]
size = Vector2(1167, 320)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_cvehr"]
radius = 8.27208
height = 43.5744

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_sljpu"]
radius = 14.5483
height = 31.4718

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sljpu"]
size = Vector2(214, 266.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wdaeh"]
size = Vector2(62, 725)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_88hlr"]
size = Vector2(1299, 152)

[sub_resource type="Animation" id="Animation_88hlr"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_wdaeh"]
resource_name = "s3-text1"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, 1.0, 1.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_wbd3l"]
_data = {
&"RESET": SubResource("Animation_88hlr"),
&"s3-text1": SubResource("Animation_wdaeh")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wbd3l"]
size = Vector2(611, 375)

[node name="Node2D" type="Node2D"]
script = ExtResource("1_sljpu")

[node name="Forest1280x720" type="Sprite2D" parent="."]
position = Vector2(641, 363)
texture = ExtResource("1_nnvjd")

[node name="CharacterBody2D" parent="." instance=ExtResource("2_dl8gu")]
z_index = 10
position = Vector2(142, 555)
scale = Vector2(4, 4)

[node name="Camera2D" type="Camera2D" parent="CharacterBody2D"]
position = Vector2(-11.6667, 2)
limit_left = 0
limit_top = 0
limit_right = 1280
limit_bottom = 720
editor_draw_limits = true

[node name="bunny" parent="." instance=ExtResource("4_msh5e")]
position = Vector2(1209, 591)
scale = Vector2(2, 2)

[node name="Tree" type="Sprite2D" parent="."]
position = Vector2(344, 318)
scale = Vector2(6.89063, 6.97656)
texture = ExtResource("5_cvehr")

[node name="StaticBody2D" type="StaticBody2D" parent="Tree"]

[node name="TreeCollision2D" type="CollisionPolygon2D" parent="Tree/StaticBody2D"]
position = Vector2(0.290248, -2.38419e-07)
polygon = PackedVector2Array(-10.449, -21.9306, -10.5941, -15.1937, -6.82086, -11.7536, -11.3197, -6.88018, -11.4648, -2.58007, -7.6916, 1.1467, -12.0453, 4.87346, -12.0453, 11.1803, -9.4331, 12.757, -2.32199, 13.0437, -1.59637, 16.0538, 3.33786, 15.6237, 3.33787, 13.0437, 7.98185, 13.0437, 11.7551, 7.88354, 11.7551, 3.44009, 6.09523, -0.430012, 8.56236, -2.58007, 8.70748, -8.74356, 3.33787, -13.4737, 6.24036, -16.4838, 6.53061, -22.3606, -1.7415, -23.9373)

[node name="Bush" type="Sprite2D" parent="."]
position = Vector2(538.312, 654.688)
scale = Vector2(3.83399, 3.83399)
texture = ExtResource("6_sljpu")

[node name="StaticBody2D4" type="StaticBody2D" parent="Bush"]
position = Vector2(-49.2112, -65.4491)
scale = Vector2(1.75697, 1.68491)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Bush/StaticBody2D4"]
position = Vector2(27.6658, 39.6666)
scale = Vector2(0.789794, 0.856617)
polygon = PackedVector2Array(-13.8661, -2.27666, -12.9429, -7.07137, -5.15865, -11.3069, -0.369522, -11.3069, 4.12935, -8.01013, 6.16109, -4.57005, 9.49896, -5.14339, 13.9978, -4.71339, 18.7869, -1.41665, 20.6736, 0.87674, 20.3833, 7.75689, 19.3971, 11.0001, 16.465, 12.917, -16.9137, 13.0603, -20.6604, 10.4981, -20.3967, 5.89352, -16.1881, 2.59677, -11.9795, 2.59677)

[node name="Tree2" type="Sprite2D" parent="."]
position = Vector2(830, 369)
scale = Vector2(6.07031, 7.11719)
texture = ExtResource("5_cvehr")

[node name="StaticBody2D2" type="StaticBody2D" parent="Tree2"]
position = Vector2(-66.5534, -7.72778)
scale = Vector2(1.13514, 0.980242)

[node name="TreeCollision2D" type="CollisionPolygon2D" parent="Tree2/StaticBody2D2"]
position = Vector2(58.9204, 7.59687)
scale = Vector2(0.999997, 0.999999)
polygon = PackedVector2Array(-8.41723, -22.3606, -8.41723, -15.4804, -4.93424, -12.0403, -9.43311, -7.31019, -8.70748, -1.43337, -5.95011, 1.1467, -10.449, 4.30011, -10.449, 9.89026, -7.54648, 13.0437, -1.7415, 13.0437, -1.59637, 15.3371, 2.46712, 15.1937, 2.75736, 13.3303, 7.1111, 13.0437, 10.449, 8.17022, 10.3038, 4.73013, 5.51473, -0.430012, 7.83672, -3.15342, 7.83672, -8.8869, 3.33787, -13.4737, 5.51473, -16.6271, 6.53061, -22.3606, -0.580498, -24.7973)

[node name="kill" type="Area2D" parent="."]
collision_layer = 2

[node name="killcoll" type="CollisionShape2D" parent="kill"]
position = Vector2(584.5, 560)
shape = SubResource("RectangleShape2D_gtq7m")

[node name="killTimer" type="Timer" parent="kill"]
wait_time = 0.6

[node name="Timer" type="Timer" parent="."]
wait_time = 5.0
autostart = true

[node name="hideCollisions" type="Node" parent="."]

[node name="tree1" type="Area2D" parent="hideCollisions"]
collision_layer = 2

[node name="tree1coll" type="CollisionShape2D" parent="hideCollisions/tree1"]
position = Vector2(278, 305)
scale = Vector2(6.89065, 6.97657)
shape = SubResource("CapsuleShape2D_cvehr")

[node name="remaining" type="Area2D" parent="hideCollisions"]

[node name="tree2coll" type="CollisionShape2D" parent="hideCollisions/remaining"]
position = Vector2(773, 341)
scale = Vector2(6.89065, 6.97657)
shape = SubResource("CapsuleShape2D_cvehr")

[node name="bushcoll" type="CollisionShape2D" parent="hideCollisions/remaining"]
position = Vector2(491, 691)
scale = Vector2(6.7362, 6.45992)
shape = SubResource("CapsuleShape2D_sljpu")

[node name="Area2D" parent="." instance=ExtResource("7_sljpu")]
position = Vector2(1036, 498)
scale = Vector2(2, 2)

[node name="safeTimer" type="Timer" parent="."]
wait_time = 2.5

[node name="SceneTrigger" type="Area2D" parent="."]
script = ExtResource("8_gtq7m")

[node name="CollisionShape2D" type="CollisionShape2D" parent="SceneTrigger"]
position = Vector2(-34, 578)
shape = SubResource("RectangleShape2D_sljpu")

[node name="Borders" type="Node2D" parent="."]
position = Vector2(-272, 365)
scale = Vector2(0.7, 0.7)

[node name="StaticBody2D" type="StaticBody2D" parent="Borders"]
position = Vector2(388.571, -521.429)
scale = Vector2(1.42857, 1.42857)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Borders/StaticBody2D"]
position = Vector2(-25, 364)
shape = SubResource("RectangleShape2D_wdaeh")

[node name="StaticBody2D2" type="StaticBody2D" parent="Borders"]
position = Vector2(388.571, -521.429)
scale = Vector2(1.42857, 1.42857)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Borders/StaticBody2D2"]
position = Vector2(1314, 374)
shape = SubResource("RectangleShape2D_wdaeh")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Borders/StaticBody2D2"]
position = Vector2(635, 253)
shape = SubResource("RectangleShape2D_88hlr")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Borders/StaticBody2D2"]
position = Vector2(654, 793)
shape = SubResource("RectangleShape2D_88hlr")

[node name="S3-text1" type="Label" parent="."]
visible = false
offset_left = 274.0
offset_top = 92.0
offset_right = 1044.0
offset_bottom = 157.0
theme_override_fonts/font = ExtResource("9_wdaeh")
theme_override_font_sizes/font_size = 32
text = "Quick, hide behind the tree..."
visible_characters = 0
visible_ratio = 0.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="S3-text1"]
libraries = {
&"": SubResource("AnimationLibrary_wbd3l")
}
autoplay = "s3-text1"

[node name="S3-text2" type="Label" parent="."]
visible = false
offset_left = 274.0
offset_top = 92.0
offset_right = 1082.0
offset_bottom = 157.0
theme_override_fonts/font = ExtResource("9_wdaeh")
theme_override_font_sizes/font_size = 32
text = "Be careful sneaking up on Bunny.
"
visible_characters = 0
visible_ratio = 0.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="S3-text2"]
libraries = {
&"": SubResource("AnimationLibrary_wbd3l")
}
autoplay = "s3-text1"

[node name="S3-text3" type="Label" parent="."]
visible = false
offset_left = 9.0
offset_top = 42.0
offset_right = 1243.0
offset_bottom = 178.0
theme_override_fonts/font = ExtResource("9_wdaeh")
theme_override_font_sizes/font_size = 32
text = "Hide behind the bushes and trees. 
Don't get caught sneaking up on her
when she's facing you"
horizontal_alignment = 1
visible_characters = 0
visible_ratio = 0.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="S3-text3"]
libraries = {
&"": SubResource("AnimationLibrary_wbd3l")
}
autoplay = "s3-text1"

[node name="S3-text4" type="Label" parent="."]
visible = false
offset_left = 15.0
offset_top = 94.0
offset_right = 1249.0
offset_bottom = 148.0
theme_override_fonts/font = ExtResource("9_wdaeh")
theme_override_font_sizes/font_size = 32
text = "Steal the scarf."
horizontal_alignment = 1
visible_characters = 0
visible_ratio = 0.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="S3-text4"]
libraries = {
&"": SubResource("AnimationLibrary_wbd3l")
}
autoplay = "s3-text1"

[node name="IntroBlocker" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="IntroBlocker"]
position = Vector2(637, 650)
shape = SubResource("RectangleShape2D_wbd3l")

[connection signal="body_entered" from="kill" to="." method="_on_kill_body_entered"]
[connection signal="body_exited" from="kill" to="." method="_on_kill_body_exited"]
[connection signal="timeout" from="kill/killTimer" to="." method="_on_kill_timer_timeout"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="body_entered" from="hideCollisions/tree1" to="." method="_on_tree_1_body_entered"]
[connection signal="body_exited" from="hideCollisions/tree1" to="." method="_on_tree_1_body_exited"]
[connection signal="body_entered" from="hideCollisions/remaining" to="." method="_on_remaining_body_entered"]
[connection signal="body_exited" from="hideCollisions/remaining" to="." method="_on_remaining_body_exited"]
[connection signal="body_entered" from="Area2D" to="." method="_on_area_2d_body_entered"]
[connection signal="timeout" from="safeTimer" to="." method="_on_safe_timer_timeout"]
[connection signal="body_entered" from="SceneTrigger" to="SceneTrigger" method="_on_body_entered"]
[connection signal="body_exited" from="SceneTrigger" to="SceneTrigger" method="_on_body_exited"]
